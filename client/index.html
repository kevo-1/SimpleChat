<!DOCTYPE html>
<html>
	<head>
		<title>Simple Chat</title>
		<style>
			body {
				margin: 0;
				padding: 20px;
				font-family: Arial, sans-serif;
			}
			#messages {
				list-style-type: none;
				margin: 0;
				padding: 0;
				margin-bottom: 20px;
				border: 1px solid #ddd;
				padding: 10px;
				height: 400px;
				overflow-y: auto;
			}
			#messages li {
				padding: 8px 16px;
				border-bottom: 1px solid #eee;
			}
			#messages li:last-child {
				border-bottom: none;
			}
			#form {
				display: flex;
				margin-top: 10px;
			}
			#input {
				flex-grow: 1;
				padding: 10px;
				font-size: 16px;
			}
			button {
				padding: 10px 20px;
				background: #4caf50;
				color: white;
				border: none;
				cursor: pointer;
				margin-left: 10px;
			}
			button:hover {
				background: #45a049;
			}
		</style>
	</head>
	<body>
		<h1>Simple Chat</h1>
		<ul id="messages"></ul>
		<form id="form" action="#">
			<input
				id="input"
				autocomplete="off"
				placeholder="Type your message..."
			/>
			<button>Send</button>
		</form>

		<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
		<script>
			const socket = io("http://localhost:3001");
			const form = document.getElementById("form");
			const input = document.getElementById("input");
			const messages = document.getElementById("messages");

			form.addEventListener("submit", (e) => {
				e.preventDefault();
				const message = input.value.trim();
				if (message) {
					socket.emit("newMessage", message);
					input.value = "";
				}
			});

			socket.on("onMessage", (msg) => {
				const item = document.createElement("li");
				item.textContent = msg;
				messages.appendChild(item);
				messages.scrollTop = messages.scrollHeight;
			});
		</script>
	</body>
</html>
